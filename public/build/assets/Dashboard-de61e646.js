import{a as w,_ as C}from"./AppLayout-36f53fba.js";import{x as g,o as n,d as r,n as u,u as _,h as k,c as b,w as l,s as N,a as t,t as d,r as A,b as i,e as O,k as L,g as $,O as F,F as y,f as x,p as j,j as M,i as T}from"./app-5e210827.js";import{_ as m,a as V,b as I,c as R,f as z}from"./LinkUser-f247b45f.js";import{_ as E}from"./TitleSection-efad3910.js";const v={name:"ResponsiveNavLink",props:{active:Boolean,href:String,as:String},setup(s){const e=s;console.log(e.active);const a=g(()=>e.active?"w-full text-left text-base font-medium block pl-3 pr-4 py-2 border-l-4 transition duration-150 ease-in-out border-cyan-800 text-cyan-700 bg-cyan-50 focus:outline-none focus:text-cyan-800 focus:bg-cyan-100 focus:border-cyan-700 ":"w-full text-left text-base font-medium block pl-3 pr-4 py-2 border-l-4 transition duration-150 ease-in-out border-transparent text-gray-600 hover:text-gray-800 hover:bg-gray-50 hover:border-gray-300 focus:outline-none focus:text-gray-800 focus:bg-gray-50 focus:border-gray-300 ");return g(()=>{console.log(e.active)}),(o,c)=>(n(),r("div",null,[s.as==="button"?(n(),r("button",{key:0,class:u(_(a))},[k(o.$slots,"default")],2)):(n(),b(_(N),{key:1,href:s.href,class:u(_(a))},{default:l(()=>[k(o.$slots,"default")]),_:3},8,["href","class"]))]))}},H={class:"inline-block shadow-gray-600 shadow-xl rounded-full w-16 h-16"},U={href:""},W=["src"],q={class:"font-medium text-sm text-blue-50"},G={name:"ListCategories",props:{data:Object},setup(s){return(e,a)=>(n(),r("li",H,[t("a",U,[t("img",{src:`./img/categories/${s.data.image}`,alt:"",class:"w-full h-full object-cover rounded-full"},null,8,W),t("span",q,d(s.data.name),1)])]))}},J={class:"hamburger"},K={class:"-mr-2 flex items-center pt-10"},Q={class:"h-9 w-9",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},X={class:"pt-2 pb-3 space-y-1"},Y=$(" Together "),Z=$(" Add new activity "),tt={class:"pt-4 pb-1 border-t border-gray-200"},et={class:"flex items-center px-4"},st={key:0,class:"shrink-0 mr-3"},at=["src","alt"],ot={class:"font-medium text-base text-gray-800"},it={class:"font-medium text-sm text-gray-500"},nt={class:"mt-3 space-y-1"},rt=$(" Profile "),ct=["onSubmit"],lt=$(" Log Out "),dt={name:"HamburgerMenu",setup(s){const e=A(!1),a=()=>{F.post(route("logout"))};return(o,c)=>(n(),r("div",J,[t("div",K,[t("button",{class:"inline-flex items-center justify-center pr-4 rounded-md text-blue-50 hover:text-cyan-800 focus:outline-none focus:text-cyan-800 transition duration-150 ease-in-out",onClick:c[0]||(c[0]=h=>e.value=!e.value)},[(n(),r("svg",Q,[t("path",{class:u({hidden:e.value,"inline-flex":!e.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},null,2),t("path",{class:u({hidden:!e.value,"inline-flex":e.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,2)]))])]),t("div",{class:u([{block:e.value,hidden:!e.value},"bg-blue-50"])},[t("div",X,[i(v,{href:o.route("dashboard"),active:o.route().current("dashboard")},{default:l(()=>[Y]),_:1},8,["href","active"]),i(v,{href:o.route("activities.create"),active:o.route().current("addForm")},{default:l(()=>[Z]),_:1},8,["href","active"])]),t("div",tt,[t("div",et,[o.$page.props.jetstream.managesProfilePhotos?(n(),r("div",st,[t("img",{class:"h-10 w-10 rounded-full object-cover",src:o.$page.props.auth.user.profile_photo_url,alt:o.$page.props.auth.user.name},null,8,at)])):O("",!0),t("div",null,[t("div",ot,d(o.$page.props.auth.user.name),1),t("div",it,d(o.$page.props.auth.user.email),1)])]),t("div",nt,[i(v,{href:o.route("profile.show"),active:o.route().current("profile.show")},{default:l(()=>[rt]),_:1},8,["href","active"]),t("form",{method:"POST",onSubmit:L(a,["prevent"])},[i(v,{as:"button"},{default:l(()=>[lt]),_:1})],40,ct)])])],2)]))}},ut={action:""},_t={class:"flex py-2"},ht={class:"relative my-6 w-3/4"},pt=t("input",{type:"search",class:"w-full bg-cyan-800 opacity-60 rounded-xl text-xs pb-2 pl-8 text-blue-50 border-none",value:"Chercher des activités"},null,-1),ft=["src"],mt={class:"flex gap-4 m-6"},vt={name:"FormSearch",setup(s){return(e,a)=>(n(),r("form",ut,[t("div",_t,[t("div",ht,[pt,t("img",{src:"./img/icon/search.png",alt:"",class:"w-4 h-4 absolute left-2 top-2"},null,8,ft)]),t("div",mt,[i(w,{class:"h-6 mt-1",src:"filter-filled-tool-symbol.png"}),i(w,{class:"h-6 mt-1",src:"carte.png"})])])]))}},gt=["src"],D={name:"ArrowRight",props:{class:String},setup(s){const e=s;return(a,o)=>(n(),r("div",{class:u(["absolute bg-gray-400 opacity-70 rounded-full",e.class])},[t("button",null,[t("img",{src:"./img/icon/double_arrow_right.png",class:"object-center"},null,8,gt)])],2))}},bt={class:"w-60 shadow-gray-600 shadow-md m-1 rounded-lg"},yt={class:"relative flex items-center h-40 overflow-hidden rounded-t-lg font-bold text-cyan-800"},xt=["src"],$t={href:"",class:"absolute top-4 left-4 bg-blue-50 py-1 px-2 rounded-lg"},wt={class:"absolute top-4 right-4 py-1 px-1.5 bg-blue-50 rounded-full"},kt={class:"absolute bottom-4 right-4 text-blue-50"},St={class:"px-4 bg-cyan-800 font-medium rounded-b-lg"},At={class:"text-blue-50 pt-4 pb-2 text-base font-bold truncate"},jt={class:"flex py-0.5"},Mt={class:"flex py-0.5 text-blue-50"},Dt={class:"flex py-0.5 text-blue-50"},Bt={class:"mx-2"},Pt={class:"py-4 flex justify-center"},Ct={name:"CardActivity",props:{data:Object},setup(s){const e=s,a=c=>`${window.location.origin}/storage/activites/${c}`;function o(c){const h=new Date(c);return z(h,"d MMMM")}return(c,h)=>(n(),r("div",bt,[t("div",yt,[t("img",{src:a(e.data.images[0].name),alt:"",class:"object-cover"},null,8,xt),t("a",$t,d(e.data.category.name),1),t("div",wt,[i(m,{src:"./img/icon/bookmark.png",class:""},null,8,["src"])]),t("p",kt,d(o(e.data.date_activity)),1)]),t("div",St,[t("h2",At,d(e.data.title),1),t("div",jt,[i(V,{distance:e.data.distance,localisation:e.data.localisation},null,8,["distance","localisation"])]),t("div",Mt,[i(m,{src:"./img/icon/utilisateur.png"},null,8,["src"]),i(I,{value:e.data.user.name},null,8,["value"]),(n(!0),r(y,null,x(Math.floor(e.data.averageNote),p=>(n(),b(m,{src:"./img/icon/star.png",key:p},null,8,["src"]))),128)),(n(!0),r(y,null,x(Math.floor(5-e.data.averageNote),p=>(n(),b(m,{src:"./img/icon/starWhite.png",key:p},null,8,["src"]))),128))]),t("div",Dt,[i(m,{src:"./img/icon/groupe.png"},null,8,["src"]),t("span",Bt,"1/"+d(e.data.nb_max_participants)+" Participant(s)",1)]),t("div",Pt,[i(R,{value:"Infos",route:"/activities/"+e.data.id+"?distance="+e.data.distance},null,8,["route"])])])]))}},Nt={class:"py-6 relative"},Ot={class:"overflow-auto flex"},Lt={class:"mr-1"},S={name:"SectionCardFloat",props:{title:String,data:Array},setup(s){const e=s;return(a,o)=>(n(),r("section",Nt,[i(E,{class:"font-extrabold text-blue-50 py-6 text-xl",value:e.title},null,8,["value"]),t("div",Ot,[(n(!0),r(y,null,x(e.data,c=>(n(),r("article",Lt,[i(Ct,{data:c},null,8,["data"])]))),256))]),i(D,{class:"top-1/2 right-0 p-2 h-14 w-14"})]))}},B=j({id:"location",state:()=>({position:null}),actions:{async fetchPosition(){try{const s=await new Promise((e,a)=>{navigator.geolocation.getCurrentPosition(e,a)});this.setPosition(s)}catch(s){console.error("error",s)}},setPosition(s){this.position=s}}}),Ft=j({id:"activity",state:()=>({activities:[]}),getters:{getActivitiesSortedByDistance:s=>s.activities.slice().sort((e,a)=>e.distance-a.distance),getActivitiesSortedByDate:s=>s.activities.slice().sort((e,a)=>new Date(e.date_activity)-new Date(a.date_activity))},actions:{async fetchActivities(){const s=B(),{latitude:e,longitude:a}=s.position.coords;if(!e||!a)return;const o=await M.get("/api/activitiesByDistance",{params:{latitude:e,longitude:a}});this.activities=Object.values(o.data)}}}),Tt={class:"mx-auto px-4"},Vt={class:"flex justify-between"},It={class:"bg-transparent pt-10"},Rt={class:"text-blue-50 font-extrabold text-4xl pl-2"},zt=["href"],Et={class:"mx-auto px-4"},Ht={class:"relative"},Ut={class:"overflow-auto flex -mx-8 px-8"},Wt={class:"mx-2"},Xt={name:"Dashboard",setup(s){const e=B(),a=Ft();async function o(){await e.fetchPosition(),await a.fetchActivities()}let c=A([]);T(()=>{o(),M.get("/api/categories").then(f=>c.value=f.data).catch(f=>console.log(f))});const h=g(()=>a.getActivitiesSortedByDistance),p=g(()=>a.getActivitiesSortedByDate);return(f,qt)=>(n(),b(C,{title:"Dashboard",class:"bg-gradient-to-b from-teal to-cyan"},{nav:l(()=>[t("div",Tt,[t("div",Vt,[t("div",It,[t("h1",Rt,[t("a",{href:f.route("dashboard")},"Together",8,zt)])]),i(dt)])])]),header:l(()=>[t("div",Et,[i(vt),t("div",Ht,[t("div",Ut,[(n(!0),r(y,null,x(_(c),P=>(n(),r("ul",Wt,[i(G,{data:P},null,8,["data"])]))),256)),i(D,{class:"p-2 h-8 w-8 top-4 right-0"})])])])]),main:l(()=>[i(S,{title:"Activités à proximité",data:_(h)},null,8,["data"]),i(S,{title:"Activités à venir",data:_(p)},null,8,["data"])]),_:1}))}};export{Xt as default};
